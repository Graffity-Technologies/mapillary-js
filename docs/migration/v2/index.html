<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/mapillary-js/blog/rss.xml" title="MapillaryJS Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/mapillary-js/blog/atom.xml" title="MapillaryJS Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="MapillaryJS" href="/mapillary-js/opensearch.xml"><title data-react-helmet="true">v2.x | MapillaryJS</title><meta data-react-helmet="true" property="og:url" content="https://mapillary.github.io/mapillary-js/docs/migration/v2"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="v2.x | MapillaryJS"><meta data-react-helmet="true" name="description" content="MapillaryJS v2.x Migration Guide"><meta data-react-helmet="true" property="og:description" content="MapillaryJS v2.x Migration Guide"><link data-react-helmet="true" rel="shortcut icon" href="/mapillary-js/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://mapillary.github.io/mapillary-js/docs/migration/v2"><link data-react-helmet="true" rel="alternate" href="https://mapillary.github.io/mapillary-js/docs/migration/v2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mapillary.github.io/mapillary-js/docs/migration/v2" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/mapillary-js/assets/css/styles.661b8b7e.css">
<link rel="preload" href="/mapillary-js/assets/js/runtime~main.b568401d.js" as="script">
<link rel="preload" href="/mapillary-js/assets/js/main.7cb5f9df.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mapillary-js/"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">MapillaryJS</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mapillary-js/docs">Docs</a><a class="navbar__item navbar__link" href="/mapillary-js/api">API</a><a class="navbar__item navbar__link" href="/mapillary-js/examples">Examples</a><a href="https://github.com/mapillary/mapillary-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/mapillary-js/"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">MapillaryJS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/mapillary-js/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/mapillary-js/api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/mapillary-js/examples">Examples</a></li><li class="menu__list-item"><a href="https://github.com/mapillary/mapillary-js" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/intro/try">Try MapillaryJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/intro/glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/guides">Guides</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extension</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/extension/extend">Extend</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Data Provider</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/procedural-data-provider">Procedural</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/geometry-provider">Geometry</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Custom Render</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/webgl-custom-renderer">WebGL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/three-custom-renderer">Three.js</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/animation">Animation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Camera Controls</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/extension/fly-controls">Fly Controls</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Theory</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/theory/theory">Theory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/theory/coordinates">Coordinates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/theory/navigation-graph">Navigation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/mapillary-js/docs/theory/polygon-triangulation">Triangulation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Migration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/migration/v4">v4.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/migration/v3">v3.x</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/mapillary-js/docs/migration/v2">v2.x</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">v2.x</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mapillaryjs-v2x-migration-guide"></a>MapillaryJS <code>v2.x</code> Migration Guide<a class="hash-link" href="#mapillaryjs-v2x-migration-guide" title="Direct link to heading">#</a></h2><p>This page describes how to migrate from MapillaryJS <code>v1.x</code> to MapillaryJS <code>v2.x</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="general"></a>General<a class="hash-link" href="#general" title="Direct link to heading">#</a></h2><p><code>v2.x</code> has a completely rewritten graph structure and IO handling. The graph was rewritten to, among other things, load nodes faster when using the <code>viewer.move*</code> methods.</p><p>The requirements on the new graph meant breaking changes to the MapillaryJS API. In addition to the graph related changes some other breaking changes have been introduced as well.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="edge-handling"></a>Edge handling<a class="hash-link" href="#edge-handling" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="v1x"></a><code>v1.x</code><a class="hash-link" href="#v1x" title="Direct link to heading">#</a></h3><p>In <code>v1.x</code> the <code>edges</code> were always cached for <code>nodes</code> retrieved from the <code>nodechanged</code> event. The properties related to <code>edge</code> handling for the <code>node</code> where the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">edges</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">IEdge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">edgesCached</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here, the edges array was always guaranteed to be populated when retrieved from the node of the <code>nodechanged</code> event. The edges array could be traversed immediately.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="v2x"></a><code>v2.x</code><a class="hash-link" href="#v2x" title="Direct link to heading">#</a></h3><p>In <code>v2.x</code>, the graph creation is changed in a way that does not guarantee that the edges have been determined for the current node when it is retrieved from the <code>nodechanged</code> event. The edges have also been separated into two different entities, <code>sequence</code> and <code>spatial</code> edges. The different entities will be retrieved asyncronously and may be set at different times. Therefore, in <code>v2.x</code>, the node properties related to edges are the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sequenceEdges</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">IEdgeStatus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sequenceEdges$</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Observable</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">IEdgeStatus</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spatialEdges</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">IEdgeStatus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spatialEdges$</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Observable</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">IEdgeStatus</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The edge status is like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><div tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">IEdgeStatus</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cached</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  edges</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">IEdge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To simplify working with the edges the <code>sequenceedgeschanged</code> and <code>spatialedgeschanged</code> events on the <code>Viewer</code> should be used.</p><p>In the same way as before, the viewer will emit a <code>nodechanged</code> event every time the current node changes. Immediately after the <code>nodechanged</code> event it will emit the <code>sequenceedgeschanged</code> and <code>spatialedgeschanged</code> events containing the current edge statuses. At this point the edges may or may not be cached. If the sequence or spatial edges for the current node are cached or changed at a later point in time the <code>sequenceedgeschanged</code> and <code>spatialedgeschanged</code> events will fire respectively.</p><p>The <code>sequenceedgeschanged</code> and <code>spatialedgeschanged</code> events always emit edge status objects related to the current node retrieved from the <code>nodechanged</code> event, never for any other nodes.</p><p>Subscribing to the <code>sequenceedgeschanged</code> and <code>spatialedgeschanged</code> events is done in the following way:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sequenceedgeschanged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> something</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">spatialedgeschanged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword control-flow" style="font-style:italic">do</span><span class="token plain"> something</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="node-properties"></a>Node properties<a class="hash-link" href="#node-properties" title="Direct link to heading">#</a></h2><p>Apart from the edge handling described above the status of the new node class is the following:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="identical-properties"></a>Identical properties<a class="hash-link" href="#identical-properties" title="Direct link to heading">#</a></h3><table><thead><tr><th><code>v1.x</code> &amp; <code>v2.x</code></th></tr></thead><tbody><tr><td><code>ca</code></td></tr><tr><td><code>capturedAt</code></td></tr><tr><td><code>fullPano</code></td></tr><tr><td><code>image</code></td></tr><tr><td><code>key</code></td></tr><tr><td><code>latLon</code></td></tr><tr><td><code>loadStatus</code></td></tr><tr><td><code>merged</code></td></tr><tr><td><code>mesh</code></td></tr><tr><td><code>pano</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="changed-properties"></a>Changed properties<a class="hash-link" href="#changed-properties" title="Direct link to heading">#</a></h3><table><thead><tr><th><code>v1.x</code></th><th><code>v2.x</code></th></tr></thead><tbody><tr><td><code>apiNavImIm.atomic_scale</code></td><td><code>scale</code></td></tr><tr><td><code>apiNavImIm.ca</code></td><td><code>originalCA</code></td></tr><tr><td><code>apiNavImIm.calt</code></td><td><code>alt</code></td></tr><tr><td><code>apiNavImIm.camera_mode</code></td><td><code>scale</code></td></tr><tr><td><code>apiNavImIm.captured_at</code></td><td><code>capturedAt</code></td></tr><tr><td><code>apiNavImIm.cca</code></td><td><code>computedCA</code></td></tr><tr><td><code>apiNavImIm.cfocal</code></td><td><code>focal</code></td></tr><tr><td><code>apiNavImIm.clat</code></td><td><code>computedLatLon.lat</code></td></tr><tr><td><code>apiNavImIm.clon</code></td><td><code>computedLatLon.lon</code></td></tr><tr><td><code>apiNavImIm.gpano</code></td><td><code>gpano</code></td></tr><tr><td><code>apiNavImIm.height</code></td><td><code>height</code></td></tr><tr><td><code>apiNavImIm.key</code></td><td><code>key</code></td></tr><tr><td><code>apiNavImIm.lat</code></td><td><code>originalLatLon.lat</code></td></tr><tr><td><code>apiNavImIm.lon</code></td><td><code>originalLatLon.lon</code></td></tr><tr><td><code>apiNavImIm.merge_cc</code></td><td><code>mergeCC</code></td></tr><tr><td><code>apiNavImIm.merge_version</code></td><td><code>mergeVersion</code></td></tr><tr><td><code>apiNavImIm.orientation</code></td><td><code>orientation</code></td></tr><tr><td><code>apiNavImIm.rotation</code></td><td><code>rotation</code></td></tr><tr><td><code>apiNavImIm.user</code></td><td><code>username</code></td></tr><tr><td><code>apiNavImIm.width</code></td><td><code>width</code></td></tr><tr><td><code>sequence.key</code></td><td><code>sequenceKey</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="removed-properties"></a>Removed properties<a class="hash-link" href="#removed-properties" title="Direct link to heading">#</a></h3><table><thead><tr><th><code>v1.x</code></th></tr></thead><tbody><tr><td><code>apiNavImIm</code></td></tr><tr><td><code>apiNavImIm.camera_mode</code></td></tr><tr><td><code>apiNavImIm.fmm35</code></td></tr><tr><td><code>hs</code></td></tr><tr><td><code>sequence</code></td></tr><tr><td><code>worthy</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-properties"></a>New properties<a class="hash-link" href="#new-properties" title="Direct link to heading">#</a></h3><table><thead><tr><th><code>v2.x</code></th></tr></thead><tbody><tr><td><code>assetsCached</code></td></tr><tr><td><code>userKey</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="navigator-failure-cases"></a>Navigator failure cases<a class="hash-link" href="#navigator-failure-cases" title="Direct link to heading">#</a></h2><p>When the <code>Viewer.moveDir</code> and <code>Viewer.moveCloseTo</code> methods are called there may not be a valid result. In that case, both methods throw errors that need to be handled by the caller.</p><p>Whenever any of the <code>Viewer.moveToKey</code>, <code>Viewer.moveDir</code> or <code>Viewer.moveCloseTo</code> methods encounter an IO related problem the error will propagate to the caller.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rotation-edge-direction"></a>Rotation edge direction<a class="hash-link" href="#rotation-edge-direction" title="Direct link to heading">#</a></h2><p>The <code>EdgeDirection.RotateLeft</code> and <code>EdgeDirection.RotateRight</code> enumeration values have been removed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="component-initialization"></a>Component initialization<a class="hash-link" href="#component-initialization" title="Direct link to heading">#</a></h2><p>The component options have been broken out from the regular viewer options.</p><p><code>v1.x</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> mly </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Mapillary</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 107)">Viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mly&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;your client id&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;your image key for initializing the viewer&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    baseImageSize</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">ImageSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Size320</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cache</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    keyboard</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    sequence</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      maxWidth</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">150</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      minWidth</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    renderMode</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">RenderMode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>v2.x</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> mly </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Mapillary</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 107)">Viewer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mly&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;your client id&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;your image key for initializing the viewer&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    baseImageSize</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">ImageSize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Size320</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    component</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      cache</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      keyboard</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      sequence</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        maxWidth</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">150</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        minWidth</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    renderMode</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Mapillary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">RenderMode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="image-plane-component"></a>Image plane component<a class="hash-link" href="#image-plane-component" title="Direct link to heading">#</a></h2><p>The image plane component has been renamed:</p><table><thead><tr><th><code>v1.x</code></th><th><code>v2.x</code></th></tr></thead><tbody><tr><td><code>imageplane</code></td><td><code>imagePlane</code></td></tr></tbody></table><p>This affects component initialization and the component API on the viewer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="render-mode"></a>Render mode<a class="hash-link" href="#render-mode" title="Direct link to heading">#</a></h2><p><code>RenderMode.Fill</code> is now the default render mode (instead of <code>RenderMode.Letterbox</code>) when creating a new viewer instance.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auth-removed"></a>Auth removed<a class="hash-link" href="#auth-removed" title="Direct link to heading">#</a></h2><p>The deprecated <code>Viewer.Auth</code> method has been removed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="renamed-distribution-files"></a>Renamed distribution files<a class="hash-link" href="#renamed-distribution-files" title="Direct link to heading">#</a></h2><p>The distribution files have been renamed according to the following:</p><table><thead><tr><th><code>v1.x</code></th><th><code>v2.x</code></th></tr></thead><tbody><tr><td><code>mapillary-js.js</code></td><td><code>mapillary.js</code></td></tr><tr><td><code>mapillary-js.min.js</code></td><td><code>mapillary.min.js</code></td></tr><tr><td><code>mapillary-js.min.css</code></td><td><code>mapillary.min.css</code></td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mapillary/mapillary-js/edit/main/doc/docs/migration/v2.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mapillary-js/docs/migration/v3"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« v3.x</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mapillaryjs-v2x-migration-guide" class="table-of-contents__link">MapillaryJS <code>v2.x</code> Migration Guide</a></li><li><a href="#general" class="table-of-contents__link">General</a></li><li><a href="#edge-handling" class="table-of-contents__link">Edge handling</a><ul><li><a href="#v1x" class="table-of-contents__link"><code>v1.x</code></a></li><li><a href="#v2x" class="table-of-contents__link"><code>v2.x</code></a></li></ul></li><li><a href="#node-properties" class="table-of-contents__link">Node properties</a><ul><li><a href="#identical-properties" class="table-of-contents__link">Identical properties</a></li><li><a href="#changed-properties" class="table-of-contents__link">Changed properties</a></li><li><a href="#removed-properties" class="table-of-contents__link">Removed properties</a></li><li><a href="#new-properties" class="table-of-contents__link">New properties</a></li></ul></li><li><a href="#navigator-failure-cases" class="table-of-contents__link">Navigator failure cases</a></li><li><a href="#rotation-edge-direction" class="table-of-contents__link">Rotation edge direction</a></li><li><a href="#component-initialization" class="table-of-contents__link">Component initialization</a></li><li><a href="#image-plane-component" class="table-of-contents__link">Image plane component</a></li><li><a href="#render-mode" class="table-of-contents__link">Render mode</a></li><li><a href="#auth-removed" class="table-of-contents__link">Auth removed</a></li><li><a href="#renamed-distribution-files" class="table-of-contents__link">Renamed distribution files</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/extension/extend">Extension</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/api">API Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/examples">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/theory/theory">Theory</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/migration/v4">Migration</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/mapillary/mapillary-js" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/mapillary-js/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/mapillary-js/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mapillary-js/assets/js/runtime~main.b568401d.js"></script>
<script src="/mapillary-js/assets/js/main.7cb5f9df.js"></script>
</body>
</html>